<form bp="margin-bottom" [formGroup]="form">
  <mat-form-field bp="full-width">
    <input matInput type="text" placeholder="Search" [formControlName]="controlNames.searchTerm" />
  </mat-form-field>
</form>

<ng-container *ngIf="searchResults | async; let searchResults; else loading">
  <div *ngIf="searchResults.images.length; else noResults" bp="grid 6 4@sm 3@md" class="image-gallery">
    <img *ngFor="let image of searchResults.images" class="image-gallery__thumbnail" bp="full-width" [src]="image.thumbnailUrl" />
  </div>

  <app-loading *ngIf="searchResults.total > searchResults.images.length" message="Loading more images..." ngxInViewport [offset]="1000"
    (inViewport)="loadMoreResults($event.value)">
  </app-loading>
</ng-container>

<ng-template #loading>
  <app-loading message="Searching..."></app-loading>
</ng-template>

<ng-template #noResults>
  <p>
    Sorry, nothing found for
    <strong>{{(searchResults | async).searchTerm}}</strong>. Please try another search term.
  </p>
</ng-template>
